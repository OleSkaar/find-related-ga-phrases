(this["webpackJsonpfind-related-phrases-js"]=this["webpackJsonpfind-related-phrases-js"]||[]).push([[0],{31:function(e,t,a){e.exports=a(52)},36:function(e,t,a){},37:function(e,t,a){},40:function(e,t){},42:function(e,t){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),s=a.n(l),o=(a(36),a(1)),c=a(2),i=a(7),d=a(6),u=(a(37),a(3)),h=function(){function e(t,a){Object(o.a)(this,e),this.phrase=t,this.count=parseInt(this.removeComma(a))}return Object(c.a)(e,[{key:"removeComma",value:function(e){return e.replace(",","")}}]),e}(),f=function(){function e(t,a,n){Object(o.a)(this,e),this.phrase=t,this.count=a,this.id=n,this.relatedWords=[]}return Object(c.a)(e,[{key:"addRelatedWord",value:function(e){this.relatedWords.push(e)}},{key:"words",get:function(){var e,t="",a=Object(u.a)(this.relatedWords);try{for(a.s();!(e=a.n()).done;){var n=e.value;t+=" ".concat(n,", ")}}catch(r){a.e(r)}finally{a.f()}return t}}]),e}(),m=function(){function e(t,a,n){Object(o.a)(this,e),this.word=t,this.count=a,this.id=n,this.relatedPhrases=[]}return Object(c.a)(e,[{key:"addCount",value:function(e){this.count+=e}},{key:"addRelatedPhrase",value:function(e){this.relatedPhrases.push(e)}}]),e}(),p=function(e,t){var a=[];return e.forEach((function(e){(function(e){return e.length>2})(e.data)&&e.data[0].localeCompare(t)&&function(e){return e.length>0}(e.data[0])&&a.push(e)})),a},v=function(){function e(){Object(o.a)(this,e),this.phrases=[]}return Object(c.a)(e,[{key:"add",value:function(e){this.phrases.push(e)}},{key:"totalCount",get:function(){var e,t=0,a=Object(u.a)(this.phrases);try{for(a.s();!(e=a.n()).done;){t+=e.value.count}}catch(n){a.e(n)}finally{a.f()}return t}},{key:"numberOfPhrases",get:function(){return this.phrases.length}},{key:"isEmpty",get:function(){return 0===this.phrases.length}}]),e}();function y(e,t){var a=e.count,n=t.count,r=0;return a>n?r=-1:a<n&&(r=1),r}var E=function(){function e(){Object(o.a)(this,e),this.words=[]}return Object(c.a)(e,[{key:"include",value:function(e){var t,a=!1,n=Object(u.a)(this.words);try{for(n.s();!(t=n.n()).done;){if(t.value.word===e){a=!0;break}}}catch(r){n.e(r)}finally{n.f()}return a}},{key:"find",value:function(e){if(this.include(e)){var t,a=Object(u.a)(this.words);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.word===e)return n}}catch(r){a.e(r)}finally{a.f()}}else console.log("Cannot find ".concat(e))}},{key:"add",value:function(e){this.words.push(e)}},{key:"sortByCount",value:function(){this.words.sort(y)}},{key:"numberOfWords",get:function(){return this.words.length}},{key:"isEmpty",get:function(){return 0===this.words.length}}]),e}(),w=a(28),b=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleOnDrop=function(t){var a,n=new E,r=new v,l=p(t,"Search Term"),s=Object(u.a)(l);try{for(s.s();!(a=s.n()).done;){var o=a.value,c=new h(o.data[0],o.data[1]),i=c.phrase,d=c.count,y=new f(i,d,r.numberOfPhrases+1);if(i.includes(" ")){var w,b=i.split(" "),g=Object(u.a)(b);try{for(g.s();!(w=g.n()).done;){var O=w.value,k=void 0;n.include(O)?(k=n.find(O)).addCount(d):(k=new m(O,d,n.numberOfWords+1),n.add(k)),y.addRelatedWord(k),k.addRelatedPhrase(y)}}catch(j){g.e(j)}finally{g.f()}}else{var P=void 0;n.include(i)?((P=n.find(i)).addCount(d),P.addRelatedPhrase(y)):((P=new m(i,d,n.numberOfWords+1)).addRelatedPhrase(y),n.add(P))}r.add(y)}}catch(j){s.e(j)}finally{s.f()}n.sortByCount(),e.props.updateState(n,r)},e.handleOnError=function(e,t,a,n){console.log(e)},e.handleOnRemoveFile=function(e){console.log("---------------------------"),console.log(e),console.log("---------------------------")},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(w.a,{onDrop:this.handleOnDrop,onError:this.handleOnError,addRemoveButton:!0,onRemoveFile:this.handleOnRemoveFile},r.a.createElement("span",null,"Drop CSV file here or click to upload."))}}]),a}(n.Component);var g=function(e){var t={borderBottom:"1px solid gainsboro",backgroundColor:e.wordId===e.clickedPhraseId?"#DBE0F0":"white"},a={borderCollapse:"collapse",padding:"5px"},n={display:e.relatedPhrases.length>1?"inherit":"none",fontSize:"1.1em"};return r.a.createElement("tr",{style:t},r.a.createElement("td",{style:a},e.wordString),r.a.createElement("td",{style:a},e.count),r.a.createElement("td",{style:a},e.relatedPhrases.length),r.a.createElement("td",{style:a},r.a.createElement("button",{style:n,onClick:function(){return e.updateRelatedPhrases(e.relatedPhrases,e.wordId)}},"\ud83e\udc72")))};var O=function(e){var t,a={width:"100%",margin:"auto",borderCollapse:"collapse",textAlign:"left",display:e.isEmpty?"none":"table"},n=[],l=0,s=Object(u.a)(e.words);try{for(s.s();!(t=s.n()).done;){var o=t.value;n.push(r.a.createElement(g,{wordId:o.id,key:l,wordString:o.word,count:o.count,relatedPhrases:o.relatedPhrases,clickedPhraseId:e.clickedPhraseId,updateRelatedPhrases:e.updateRelatedPhrases})),l++}}catch(c){s.e(c)}finally{s.f()}return r.a.createElement("table",{style:a},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h2",null,"Search phrase")),r.a.createElement("th",null,r.a.createElement("h2",null,"Unique searches")),r.a.createElement("th",null,r.a.createElement("h2",null,"Related Phrases")))),r.a.createElement("tbody",null,n))};var k=function(e){return r.a.createElement("tr",{className:"tableRow"},r.a.createElement("td",null,e.phrase),r.a.createElement("td",null,e.count),r.a.createElement("td",null,e.percentage))};var P=function(e){var t,a=0,n=Object(u.a)(e.relatedPhrases);try{for(n.s();!(t=n.n()).done;){a+=t.value.count}}catch(h){n.e(h)}finally{n.f()}var l,s=[],o=0,c=Object(u.a)(e.relatedPhrases);try{for(c.s();!(l=c.n()).done;){var i=l.value,d=(i.count/a*100).toFixed(1);s.push(r.a.createElement(k,{key:o,phrase:i.phrase,count:i.count,percentage:"".concat(d," %")})),o++}}catch(h){c.e(h)}finally{c.f()}return r.a.createElement("div",null,r.a.createElement("table",{className:"relatedPhraseWindow"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h3",null,"Related phrases")),r.a.createElement("th",null,r.a.createElement("h3",null,"Unique searches")),r.a.createElement("th",null,r.a.createElement("h3",null,"% of total"))),s,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Total:")),r.a.createElement("td",null,r.a.createElement("strong",null,a)),r.a.createElement("td",null,r.a.createElement("strong",null,"100%"))))))},j=function(e){Object(i.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={wordContainer:new E,phraseContainer:new v,isEmpty:!0,relatedPhrases:[],clickedPhraseId:void 0},n}return Object(c.a)(a,[{key:"updateWordAndPhrases",value:function(e,t){this.setState({wordContainer:e,phraseContainer:t,isEmpty:e.isEmpty&&t.isEmpty})}},{key:"updateRelatedPhrases",value:function(e,t){this.setState({relatedPhrases:e,clickedPhraseId:t})}},{key:"render",value:function(){var e=this,t={display:this.state.relatedPhrases.length>0?"flex":"none"},a={maxWidth:"40%",margin:"auto"};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"\ud83d\udd0d Find related phrases")),r.a.createElement("div",{style:a},r.a.createElement("p",null,"This is a tool to help analyze and organize site search data from Google Analytics."),r.a.createElement("p",null,"To use it, navigate to Behavior ",">"," Site Search ",">"," Search Terms, choose the time span you want data for, and choose Export"," ",">"," CSV."),r.a.createElement("p",null,"Then, upload the CSV with drag and drop or browse, and it will connect all phrases that contain the same word."),r.a.createElement("p",null,"For instance, if 10 users have searched for 'sleeping bag', and 5 users have searched for 'red sleeping bag', the phraseContainer 'sleeping bag' will now have 15 unique searches, and 'red sleeping bag' will be marked as a related phrase to 'sleeping bag'.")),r.a.createElement("div",{style:{maxWidth:"100vw",display:"flex",justifyContent:"center",flexDirection:"row",transition:"all 1s ease"}},r.a.createElement("div",{style:{width:"40%",display:"flex",alignSelf:"center"}},r.a.createElement(O,{isEmpty:this.state.isEmpty,words:this.state.wordContainer.words,phrases:this.state.phraseContainer.phrases,clickedPhraseId:this.state.clickedPhraseId,updateRelatedPhrases:function(t,a){return e.updateRelatedPhrases(t,a)}})),r.a.createElement("div",{style:t},r.a.createElement(P,{relatedPhrases:this.state.relatedPhrases}))),r.a.createElement("div",{style:a},r.a.createElement(b,{onDrop:this.handleOnDrop,onError:this.handleOnError,addRemoveButton:!0,onRemoveFile:this.handleOnRemoveFile,updateState:function(t,a){return e.updateWordAndPhrases(t,a)}},r.a.createElement("span",null,"Click to upload."))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.cf98872f.chunk.js.map